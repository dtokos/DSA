#import <XCTest/XCTest.h>
#include "tree.hpp"

@interface TestTree : XCTestCase

@end

@implementation TestTree

- (void)testOneElement {
	BSTNode *tree = NULL;
	int inputs[] = {5};
	int results[] = {-1};
	
	for (int i = 0; i < 1; i++) {
		tree = avlInsert(tree, inputs[i]);
		XCTAssertEqual(bstFindClosest(tree, inputs[i]), results[i]);
	}
}

- (void)testLeftChild {
	BSTNode *tree = NULL;
	int inputs[] = {5, 4};
	int results[] = {-1, 5};
	
	for (int i = 0; i < 2; i++) {
		tree = avlInsert(tree, inputs[i]);
		XCTAssertEqual(bstFindClosest(tree, inputs[i]), results[i]);
	}
}

- (void)testRightChild {
	BSTNode *tree = NULL;
	int inputs[] = {5, 4};
	int results[] = {-1, 5};
	
	for (int i = 0; i < 2; i++) {
		tree = avlInsert(tree, inputs[i]);
		XCTAssertEqual(bstFindClosest(tree, inputs[i]), results[i]);
	}
}

- (void)testParent {
	BSTNode *tree = NULL;
	int inputs[] = {5, 20, 11};
	int results[] = {-1, 5, 5};
	
	for (int i = 0; i < 3; i++) {
		tree = avlInsert(tree, inputs[i]);
		XCTAssertEqual(bstFindClosest(tree, inputs[i]), results[i]);
	}
}

- (void)testGrandParent {
	BSTNode *tree = NULL;
	int inputs[] = {5, 20, 19, 18, 17, 6};
	int results[] = {-1, 5, 20, 19, 18, 5};
	
	for (int i = 0; i < 6; i++) {
		tree = avlInsert(tree, inputs[i]);
		XCTAssertEqual(bstFindClosest(tree, inputs[i]), results[i]);
	}
}

- (void)testLeftGrandChild {
	BSTNode *tree = NULL;
	int inputs[] = {20, 5, 15, 6, 7, 14};
	int results[] = {-1, 20, 20, 5, 6, 15};
	
	for (int i = 0; i < 6; i++) {
		tree = avlInsert(tree, inputs[i]);
		XCTAssertEqual(bstFindClosest(tree, inputs[i]), results[i]);
	}
}

- (void)testRightGrandChild {
	BSTNode *tree = NULL;
	int inputs[] = {20, 15, 5, 14, 13, 6};
	int results[] = {-1, 20, 15, 15, 14, 5};
	
	for (int i = 0; i < 6; i++) {
		tree = avlInsert(tree, inputs[i]);
		XCTAssertEqual(bstFindClosest(tree, inputs[i]), results[i]);
	}
}

- (void)testIfSameShouldPickSmaller {
	BSTNode *tree = NULL;
	int inputs[] = {10, 8, 6, 8};
	int results[] = {-1, 10, 8, 6};
	
	for (int i = 0; i < 4; i++) {
		tree = avlInsert(tree, inputs[i]);
		XCTAssertEqual(bstFindClosest(tree, inputs[i]), results[i]);
	}
}

-(void)testExample1 {
	BSTNode *tree = NULL;
	int inputs[] = {5, 3, 2, 1, 3};
	int results[] = {-1, 5, 3, 2, 2};
	
	for (int i = 0; i < 5; i++) {
		tree = avlInsert(tree, inputs[i]);
		XCTAssertEqual(bstFindClosest(tree, inputs[i]), results[i]);
	}
}

-(void)testExample2 {
	BSTNode *tree = NULL;
	int inputs[] = {16796, 58786, 208012, 742900, 2674440, 9694845, 1, 2, 5, 14, 42, 132, 429, 1430, 4862};
	int results[] = {-1, 16796, 58786, 208012, 742900, 2674440, 16796, 1, 2, 5, 14, 42, 132, 429, 1430};
	
	for (int i = 0; i < 15; i++) {
		tree = avlInsert(tree, inputs[i]);
		XCTAssertEqual(bstFindClosest(tree, inputs[i]), results[i]);
	}
}

- (void)testExample3 {
	BSTNode *tree = NULL;
	int inputs[] = {
		34127, 57762, 39250, 53944, 59824, 12015, 63334, 48628, 63134, 73969, 36821, 68479, 84907, 77875, 86329, 53813, 17344, 59608, 87281, 16768, 56949, 87522, 58438, 40428, 49747, 74211, 54443, 5301, 19429, 72464, 78131, 42154, 14592, 84105, 50945, 97237, 99667, 78255, 18577, 35986, 77725, 20784, 49085, 5253, 1446, 44950, 14004, 51228, 91656, 33850, 17872, 25944, 19303, 42941, 67276, 1881, 94647, 25137, 8155, 59230, 44460, 81444, 87576, 41280, 97909, 79398, 70002, 42577, 26329, 10107, 97647, 99919, 20248, 85658, 8078, 35483, 44527, 57664, 1239, 35074, 27046, 52601, 7673, 76916, 71062, 96431, 34619, 18325, 16025, 17549, 51113, 45106, 12100, 15113, 48146, 81472, 56930, 24940, 66346, 99357, 76900, 99480, 56949, 24587, 58310, 8987, 15350, 5641, 69570, 64492, 96922, 93445, 46288, 11166, 97320, 40548, 29832, 400, 57169, 57047, 58877, 20320, 58307, 23343, 25143, 84265, 12343, 37623, 31403, 71045, 38722, 85135, 65862, 35308, 40156, 79562, 19262, 24298, 84641, 54517, 56473, 45532, 46965, 30895, 10849, 93751, 42310, 21473, 80656, 97651, 45265, 85440, 41732, 42187, 81841, 4372, 54602, 37405, 22904, 64897, 91149, 14067, 45371, 76979, 4734, 96590, 76245, 99553, 71438, 53530, 51919, 4683, 94663, 48076, 58581, 37894, 89651, 30738, 49202, 10457, 94469, 84094, 7474, 11205, 29016, 88202, 88608, 10454, 85430, 84205, 9142, 62923, 23794, 1017, 46257, 5659, 39380, 42476, 59925, 49145, 26913, 73045, 71669, 42638, 31490, 29751, 87010, 22978, 41806, 13003, 33771, 24126, 42871, 38585, 46157, 68754, 7337, 92637, 29346, 75699, 73369, 68214, 1915, 17312, 6662, 95591, 1679, 4631, 29873, 56055, 70227, 83550, 84798, 40473, 36080, 37515, 40284, 70910, 41537, 6993, 38227, 1464, 55534, 62564, 60064, 6965, 7117, 49320, 2746, 72201, 42207, 26143, 32079, 87449, 60471, 31064, 80931, 59239, 90252, 95251, 57019, 58237, 7274, 70598, 44361, 95492, 36141, 22946, 37224, 60549, 59628, 44202, 52729, 59511, 15662, 82130, 35823, 97773, 29348, 10247, 14766, 97214, 39594, 48917, 37474, 8681, 43803, 19149, 16513, 45568, 63809, 87042, 67220, 36328, 23811, 33089, 64071, 77988, 75154, 97948, 93129, 97492, 89605, 71384, 73106, 15427, 33730, 29161, 70549, 95539, 21159, 45592, 75059, 84229, 79263, 76109, 39206, 49416, 24772, 57313, 31873, 97211, 29382, 99620, 8110, 36279, 87935, 87420, 87279, 60276, 55712, 84083, 9616, 32526, 19089, 92906, 41667, 43554, 44243, 8284, 19421, 71272, 32139, 49416, 82032, 97515, 32379, 15723, 88720, 81012, 32472, 28261, 97965, 32735, 57037, 72309, 71363, 30436, 14216, 99038, 64121, 93138, 93118, 81080, 85099, 67130, 36287, 94424, 99631, 58965, 65202, 82285, 81566, 67126, 69449, 63118, 73156, 909, 77305, 3950, 40828, 33582, 16069, 35446, 63787, 58810, 72014, 13542, 63041, 2682, 84560, 32623, 72705, 47341, 90421, 98829, 46077, 37351, 26939, 96657, 5878, 73070, 41013, 17447, 26809, 42705, 78341, 86682, 85075, 30575, 79133, 1009, 24924, 3106, 43987, 77827, 29869, 36690, 17127, 53767, 10864, 41860, 16359, 54356, 43768, 75339, 26533, 20680, 84266, 53077, 95776, 58251, 91713, 96133, 67958, 74419, 5194, 59754, 71588, 20231, 22404, 39314, 93086, 32951, 5871, 84304, 90089, 61825, 31200, 67812, 13005, 60810, 81835, 61538, 53903, 5737, 52981, 56120, 97155, 26950, 35782, 18134, 82005, 34003, 50132, 61602, 22600, 24536, 39735, 20690, 62024, 93148, 13413, 57572, 13932, 18285, 84493, 91246, 86453, 85960, 86815, 73288, 13014, 54955, 78063, 89185, 67950, 37658, 25736, 7657, 35066, 34791, 68382, 23294, 67956, 75425, 45595, 71234, 41551, 85644, 78734, 12425, 65678, 65939, 37201, 73660, 84750, 57966, 59208, 85851, 40231, 15180, 24905, 6266, 64106, 38869, 70571, 67182, 39219, 817, 30019, 66470, 24773, 5046, 75764, 71028, 59082, 49266, 63529, 49421, 36480, 37420, 24754, 11207, 42844, 61303, 55408, 84429, 19582, 25505, 78224, 76393, 87175, 18600, 51982, 65041, 22049, 17642, 38666, 9003, 33812, 88770, 49231, 49636, 96503, 95498, 51313, 77160, 25539, 66654, 5748, 48784, 31249, 7850, 32445, 49369, 96025, 8168, 84170, 93266, 34221, 89017, 95747, 21988, 48902, 37383, 48020, 69999, 68805, 68096, 30887, 12192, 99460, 1788, 3629, 64741, 23159, 96937, 47112, 63338, 79572, 54683, 83315, 57789, 3171, 76878, 23323, 27504, 37225, 69413, 57829, 66011, 89454, 88144, 49429, 59830, 14801, 12725, 61332, 29761, 19188, 95330, 79856, 17545, 74053, 6152, 10227, 94775, 8795, 36712, 96052, 79024, 80963, 64447, 81056, 91323, 42215, 39651, 66758, 19717, 31809, 1789, 51808, 39712, 41946, 89126, 37898, 65087, 11756, 90969, 21614, 22996, 49875, 63174, 16749, 38406, 66260, 73410, 72197, 58332, 93305, 65436, 76663, 98208, 75206, 30154, 29262, 44480, 2351, 12100, 28446, 89595, 68039, 30639, 6333, 50683, 66767, 68198, 65915, 47310, 55823, 6598, 77104, 23847, 42028, 55472, 40459, 82465, 71386, 25655, 14365, 10498, 5080, 55673, 73514, 32405, 61984, 38650, 92467, 76963, 68417, 57652, 93418, 7212, 7968, 81083, 42275, 94205, 82729, 72427, 31046, 34524, 71432, 35299, 48718, 69637, 96842, 19538, 92119, 47431, 59510, 87319, 87677, 42335, 83558, 22429, 69558, 82416, 41802, 17585, 14764, 71348, 68896, 53173, 62396, 66977, 4111, 13970, 31507, 67813, 51500, 98367, 29643, 89545, 84594, 6972, 86284, 22272, 82195, 37486, 86147, 89742, 930, 28122, 41692, 96241, 79897, 88753, 50230, 17956, 55478, 71047, 84318, 2020, 69652, 60015, 36497, 130, 6763, 73172, 13678, 86336, 99302, 77597, 27814, 76905, 54743, 98940, 5363, 14567, 97101, 73258, 7181, 53200, 79960, 77933, 93545, 5808, 44249, 1767, 15496, 20420, 74869, 37415, 91303, 94907, 26044, 6397, 29446, 44289, 76108, 63671, 83413, 63586, 69816, 51918, 65931, 74455, 77732, 35772, 86790, 72945, 9526, 54650, 81471, 11093, 40544, 27628, 46120, 2504, 34375, 40155, 28269, 54889, 18667, 91575, 46222, 53107, 75457, 17760, 20206, 48390, 76718, 36451, 415, 15028, 63616, 63452, 34920, 89847, 99091, 945, 25409, 29500, 55015, 22422, 64162, 32118, 57137, 37264, 48768, 66918, 79307, 52061, 93626, 2173, 88280, 59237, 63072, 59439, 39291, 4563, 32840, 12516, 1991, 43886, 2285, 12276, 79331, 78938, 76472, 17253, 30646, 86813, 23817, 19326, 64896, 78291, 86374, 1388, 3600, 39867, 1695, 49709, 66310, 80672, 42031, 22763, 48826, 6112, 45998, 20181, 7922, 3079, 88100, 91896, 84637, 46039, 99172, 15334, 67573, 86246, 20546, 56738, 84760, 20642, 16695, 56320, 58958, 19751, 87210, 32808, 81668, 98095, 35516, 68636, 27362, 79474, 95063, 91391, 19552, 24888, 83101, 85400, 86379, 45301, 8116, 26223, 19747, 38222, 30508, 35301, 73567, 78041, 40657, 21425, 26751, 67179, 33389, 45003, 20853, 42576, 65195, 22120, 73619, 33896, 59227, 56667, 97392, 44063, 24188, 10537, 20457, 27809, 29562, 11146, 24766, 16393, 794, 54703, 5677, 55887, 64466, 88158, 78535, 68393, 71598, 6064, 59019, 87906, 14026, 35383, 81190, 26676, 75810, 75686, 10650, 4358, 91201, 32390, 81992, 46421, 42919, 29556, 49126, 70621, 78497, 53408, 60055, 23401, 25999, 39898, 69027, 79634, 85584, 55111, 87092, 33472, 88808, 38992, 7087, 922, 71016, 76241, 59504, 82627, 79911, 7126, 65353, 5685
	};
	int results[] = {
		-1, 34127, 34127, 57762, 57762, 34127, 59824, 53944, 63334, 63334, 39250, 63334, 73969, 73969, 84907, 53944, 12015, 59824, 86329, 17344, 57762, 87281, 57762, 39250, 48628, 73969, 53944, 12015, 17344, 73969, 77875, 40428, 16768, 84907, 49747, 87522, 97237, 78131, 19429, 36821, 77875, 19429, 48628, 5301, 5253, 42154, 14592, 50945, 87522, 34127, 17344, 20784, 19429, 42154, 68479, 1446, 97237, 25944, 5301, 59608, 44950, 84105, 87522, 40428, 97237, 78255, 68479, 42941, 25944, 12015, 97909, 99667, 20784, 86329, 8155, 35986, 44460, 57762, 1446, 35483, 26329, 53813, 8078, 77725, 70002, 97237, 35074, 18577, 16768, 17344, 51228, 44950, 12015, 14592, 48628, 81444, 56949, 25137, 67276, 99667, 76916, 99357, 56930, 24940, 58438, 8155, 15113, 5301, 70002, 63334, 97237, 94647, 45106, 12015, 97237, 40428, 27046, 1239, 56949, 56949, 59230, 20248, 58310, 24587, 25137, 84105, 12100, 36821, 29832, 71062, 39250, 84907, 66346, 35483, 40428, 79398, 19303, 24587, 84907, 54443, 56930, 45106, 46288, 31403, 11166, 93445, 42154, 20784, 81444, 97647, 45106, 85658, 42154, 42154, 81472, 5253, 54517, 37623, 23343, 64492, 91656, 14004, 45265, 76916, 4372, 96431, 76900, 99480, 71062, 53813, 52601, 4734, 94647, 48146, 58438, 37623, 91149, 30895, 49085, 10107, 94647, 84105, 7673, 11166, 29832, 87576, 88202, 10457, 85440, 84265, 8987, 63134, 23343, 1239, 46288, 5641, 39250, 42577, 59824, 49202, 27046, 72464, 71438, 42577, 31403, 29832, 87281, 22904, 41732, 12343, 33850, 24298, 42941, 38722, 46257, 68479, 7474, 93445, 29016, 76245, 73045, 68479, 1881, 17344, 7337, 96431, 1881, 4683, 29832, 56473, 70002, 84094, 84907, 40428, 35986, 37623, 40156, 71045, 41732, 6662, 37894, 1446, 56055, 62923, 59925, 6993, 6993, 49202, 1915, 72464, 42187, 26329, 31490, 87522, 60064, 30895, 80656, 59230, 89651, 95591, 57047, 58307, 7337, 70910, 44460, 95591, 36080, 22978, 37405, 60471, 59608, 44361, 52601, 59608, 15350, 81841, 35986, 97651, 29346, 10107, 14592, 97237, 39380, 49085, 37515, 8987, 44202, 19262, 16768, 45532, 63334, 87010, 67276, 36141, 23794, 33771, 63809, 77875, 75699, 97909, 93445, 97647, 89651, 71438, 73045, 15350, 33771, 29016, 70598, 95492, 21473, 45568, 75154, 84205, 79398, 76245, 39250, 49320, 24940, 57169, 32079, 97214, 29348, 99667, 8078, 36328, 88202, 87449, 87281, 60471, 55534, 84094, 9142, 32079, 19149, 93129, 41732, 43803, 44202, 8155, 19429, 71384, 32079, 49320, 82130, 97492, 32526, 15662, 88608, 80931, 32526, 29016, 97948, 32526, 57047, 72201, 71384, 30738, 14067, 99357, 64071, 93129, 93129, 81012, 85135, 67220, 36279, 94469, 99620, 58877, 64897, 82130, 81472, 67130, 69570, 63134, 73106, 1017, 76979, 4372, 40548, 33730, 16025, 35483, 63809, 58877, 72201, 14004, 63118, 2746, 84641, 32526, 72464, 46965, 90252, 99038, 46157, 37405, 26913, 96590, 5659, 73045, 40828, 17549, 26913, 42638, 78255, 87010, 85099, 30436, 79263, 1017, 24940, 2746, 43803, 77875, 29873, 36821, 17312, 53813, 10849, 41806, 16513, 54443, 43803, 75154, 26329, 20784, 84265, 52729, 95591, 58237, 91656, 96431, 68214, 74211, 5253, 59824, 71669, 20248, 22904, 39250, 93118, 33089, 5878, 84266, 90252, 62564, 31064, 67958, 13003, 60549, 81841, 61825, 53944, 5659, 53077, 56055, 97211, 26939, 35823, 18325, 82032, 34127, 49747, 61538, 22404, 24587, 39594, 20680, 61825, 93138, 13542, 57664, 14004, 18325, 84560, 91149, 86329, 85658, 86682, 73369, 13005, 54602, 78131, 89605, 67958, 37623, 25944, 7673, 35074, 34619, 68479, 23343, 67958, 75339, 45592, 71272, 41537, 85658, 78341, 12343, 65862, 65862, 37224, 73369, 84798, 57762, 59230, 85960, 40284, 15113, 24924, 5878, 64121, 38722, 70549, 67220, 39206, 909, 29873, 66346, 24772, 5194, 75699, 71045, 58965, 49320, 63334, 49416, 36328, 37405, 24772, 11205, 42871, 61538, 55534, 84493, 19429, 25736, 78255, 76245, 87279, 18577, 51919, 64897, 22404, 17549, 38722, 8987, 33850, 88720, 49202, 49747, 96431, 95492, 51228, 77305, 25505, 66470, 5737, 48917, 31200, 7673, 32472, 49416, 96133, 8155, 84205, 93148, 34127, 89185, 95776, 22049, 48917, 37405, 48076, 70002, 68754, 68214, 30895, 12100, 99480, 1881, 3950, 64897, 23294, 96922, 46965, 63334, 79562, 54602, 83550, 57762, 3106, 76900, 23343, 27046, 37224, 69449, 57789, 65939, 89605, 88202, 49421, 59824, 14766, 13003, 61303, 29751, 19149, 95251, 79572, 17549, 73969, 6266, 10247, 94663, 8681, 36690, 96025, 79133, 80931, 64492, 81080, 91246, 42207, 39594, 66654, 19582, 31873, 1788, 51919, 39735, 41860, 89185, 37894, 65041, 12015, 91149, 21473, 22978, 49747, 63134, 16768, 38227, 66346, 73369, 72201, 58310, 93266, 65202, 76878, 97965, 75154, 30019, 29346, 44460, 2682, 12015, 28261, 89605, 68096, 30575, 6266, 50945, 66758, 68214, 65939, 47341, 55712, 6662, 77160, 23811, 41946, 55534, 40473, 82285, 71384, 25736, 14216, 10457, 5046, 55712, 73410, 32379, 62024, 38666, 92637, 76979, 68382, 57664, 93445, 7274, 8078, 81080, 42310, 94424, 82465, 72464, 31064, 34619, 71438, 35308, 48784, 69570, 96922, 19582, 92467, 47341, 59511, 87281, 87576, 42310, 83550, 22404, 69570, 82465, 41806, 17549, 14766, 71363, 68805, 53077, 62564, 67126, 3950, 14004, 31490, 67812, 51313, 98208, 29751, 89595, 84560, 6965, 86329, 22404, 82130, 37474, 86284, 89651, 909, 28261, 41667, 96133, 79856, 88770, 50132, 17872, 55472, 71045, 84304, 1915, 69637, 60064, 36480, 400, 6662, 73156, 13542, 86329, 99357, 77725, 28122, 76900, 54683, 99038, 5301, 14592, 97155, 73288, 7212, 53173, 79897, 77988, 93445, 5748, 44243, 1788, 15427, 20320, 75059, 37420, 91323, 94775, 26143, 6333, 29382, 44249, 76109, 63787, 83315, 63529, 69652, 51919, 65939, 74419, 77725, 35782, 86815, 73045, 9616, 54683, 81472, 11166, 40548, 27504, 46157, 2351, 34524, 40156, 28261, 54955, 18600, 91656, 46257, 53077, 75425, 17872, 20231, 48628, 76663, 36480, 400, 15113, 63586, 63529, 34791, 89742, 99038, 930, 25505, 29446, 54955, 22429, 64121, 32139, 57169, 37225, 48784, 66977, 79263, 51982, 93545, 2020, 88202, 59239, 63041, 59510, 39314, 4631, 32735, 12425, 2020, 43803, 2351, 12343, 79307, 79024, 76393, 17312, 30639, 86815, 23811, 19303, 64897, 78255, 86336, 1446, 3629, 39735, 1679, 49747, 66346, 80656, 42028, 22904, 48784, 6152, 46077, 20206, 7968, 3106, 88144, 91713, 84641, 46077, 99091, 15350, 67812, 86284, 20420, 56930, 84750, 20680, 16749, 56473, 58965, 19717, 87175, 32840, 81566, 98208, 35483, 68754, 27504, 79398, 94907, 91323, 19538, 24905, 83315, 85430, 86374, 45265, 8110, 26143, 19751, 38227, 30575, 35299, 73514, 78063, 40548, 21473, 26809, 67182, 33582, 44950, 20784, 42577, 65202, 22049, 73660, 33850, 59230, 56738, 97320, 43987, 24126, 10498, 20420, 27814, 29500, 11166, 24772, 16359, 817, 54683, 5659, 55823, 64447, 88144, 78341, 68382, 71588, 6112, 58965, 87935, 14004, 35446, 81083, 26751, 75764, 75699, 10537, 4372, 91246, 32379, 82005, 46288, 42941, 29562, 49145, 70598, 78535, 53530, 60064, 23343, 26044, 39867, 68896, 79572, 85644, 55015, 87042, 33389, 88770, 38869, 7117, 930, 71028, 76245, 59510, 82729, 79897, 7117, 65436, 5677
	};
	
	for (int i = 0; i < 1000; i++) {
		printf("%i\n", i);
		tree = avlInsert(tree, inputs[i]);
		XCTAssertEqual(bstFindClosest(tree, inputs[i]), results[i]);
	}
}

@end
